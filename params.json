{"name":"Autodeploy","tagline":"Simple wrapper to make it easy to automatically deploy newer versions of your web apps","body":"autodeploy\r\n==========\r\n![nodei.co badge](https://nodei.co/npm/autodeploy.png?downloads=true)\r\n\r\nSimple wrapper to make it easy to automatically deploy newer versions of your web apps\r\n\r\n## Installation\r\n```bash\r\nnpm install --save autodeploy\r\n```\r\n\r\n## What it Is\r\nAutodeploy is a wrapper around node's core `http` module to make it easy to\r\nroll your own (for example) Git-based deployment.\r\n\r\nSince many code-hosting sites offer hooks that they will make an HTTP request to\r\nwhen your code is changed, Autodeploy lets you set up a server on a different\r\nport that your code-hosting site can make requests to.\r\n\r\nWhile automated deployment is great, there are some concerns that need to be\r\naddressed. For instance, there may be some times of day where you know that your\r\napp will be under high load. You wouldn't want to restart your server during\r\nthose hours. Autodeploy provides a callback so you can decide if you want to\r\nrestart your app. If the callback returns `false`, it will keep calling your\r\ncallback at specified intervals, to make sure that the new code is eventually\r\ndeployed.\r\n\r\n## Usage\r\n`require('autodeploy')` returns a function that you call with options. That\r\nfunction then returns an instance of `http.Server`, which you can call `listen`\r\non to start the server. While Autodeploy won't fall apart if you start multiple\r\nservers (as long as they are on different ports), this is not recommended.\r\n\r\nExample:\r\n```js\r\n// import autodeploy\r\nvar autodeploy = require('autodeploy');\r\n\r\n// create the server\r\nvar server = autodeploy({\r\n    // called to see if it's a good time to restart the server\r\n    shouldRestart: function() {\r\n        console.log('shouldRestart called');\r\n        // don't do this in production environments!\r\n        return Math.random() > 0.5;\r\n    },\r\n\r\n    // called when the app needs to restart\r\n    restart: function() {\r\n        console.log('restart called');\r\n        // fetch new code\r\n        // stop the app\r\n        // install dependencies\r\n        // start the app again\r\n    },\r\n\r\n    // specifies how often it should call shouldRestart if it returns false the first time\r\n    interval: 5000,\r\n\r\n    // path to listen on\r\n    path: '/restart'\r\n});\r\n\r\n// start it!\r\nserver.listen(8000);\r\nconsole.log('autodeploy listening at localhost:8000/restart');\r\n```\r\n\r\n## Options\r\nOptions are passed in as an object, the only argument to Autodeploy's exported\r\nfunction.\r\n\r\n### shouldRestart\r\n`shouldRestart` is called by Autodeploy the first time the request is made. It\r\nshould return `true` if it's a good time to restart the app, `false` otherwise.\r\n\r\nIf it returns `false` the first time, Autodeploy will keep calling it at the\r\ninterval specified.\r\n\r\nDefault: `function() { return true; }`\r\n\r\n### restart\r\n`restart` is the function that Autodeploy calls to restart your app.\r\n\r\nThis option is required. Autodeploy will throw an error if it is not specified.\r\n\r\n### interval\r\nThe delay between subsequent calls to `shouldRestart`. This should be either a\r\nnumber of milliseconds or a string understandable by the\r\n[ms](http://npmjs.com/package/ms) module.\r\n\r\nDefault: `10000`\r\n\r\n### path\r\nThe path that will restart your app.\r\n\r\nDefault: `'/'`\r\n\r\n### authorize\r\nA function to authorize the request. This is meant to support systems like\r\nGitHub's Webhooks, where your app is given a secret that you specify as\r\nauthorization. The function is passed the request object from node's `http`\r\nmodule as the only argument.\r\n\r\nDefault: `function() { return true; }`\r\n\r\n## License\r\nAutodeploy is dual-licensed under the\r\n[MIT](http://www.opensource.org/licenses/mit-license.php) and\r\n[GPL 3.0](http://www.opensource.org/licenses/gpl-3.0.html) licenses. This means\r\nthat you can use it in **any** package, no matter what license you are using.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}